{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default async function getImagesByQuery(q, page) {\n  const params = new URLSearchParams({\n    key: '52124620-04c3728bcdfdd891621e81587',\n    q,\n    image_type: \"photo\",\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  });\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    return response.data;\n  } catch (error) {\n    return {};\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.span-loader');\nconst loadmorebtn = document.querySelector('.form-btn-load');\nconst lightbox = new SimpleLightbox('.gallery-link', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 1,\n});\n\nexport function createGallery(images) {\n    const galleryStr = images\n        .map(image => {\n            return `<li class=\"gallery-item\">\n                        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                        <img\n                            class=\"gallery-img\"\n                            src=\"${image.webformatURL}\"\n                            alt=\"${image.tags}\"\n                        />\n                        <ul class=\"gallery-desc\">\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Likes</span>\n                                <span class=\"gallery-desc-item-value\">${image.likes}</span>\n                            </li>\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Views</span>\n                                <span class=\"gallery-desc-item-value\">${image.views}</span>\n                            </li>\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Comments</span>\n                                <span class=\"gallery-desc-item-value\">${image.comments}</span>\n                            </li>\n                            <li class=\"gallery-desc-item\">\n                                <span class=\"gallery-desc-item-name\">Downloads</span>\n                                <span class=\"gallery-desc-item-value\">${image.downloads}</span>\n                            </li>\n                        </ul>\n                        </a>\n                    </li>`})\n        .join(\"\");\n\n    gallery.insertAdjacentHTML('beforeend', galleryStr);    \n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.add('loader');\n}\n\nexport function hideLoader() {    \n    loader.classList.remove('loader');\n}\n\nexport function showLoadMoreButton() {\n    loadmorebtn.classList.add('is-active');\n}\n\nexport function hideLoadMoreButton() {\n    loadmorebtn.classList.remove('is-active');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"/js/pixabay-api\";\nimport * as render from \"/js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst loadmorebtn = document.querySelector('.form-btn-load');\n\nlet keyWord;\nlet page;\n\nconst galleryUpd = async evt => {\n    evt.preventDefault();\n    render.hideLoadMoreButton();\n\n    if (evt.target.nodeName === 'FORM') {        \n        render.clearGallery();\n        keyWord = evt.target.elements['search-text'].value.trim();\n        page = 1;\n        form.reset();\n        if (!(keyWord)) return;\n    }    \n    \n    render.showLoader();    \n    \n    const data = await getImagesByQuery(keyWord, page++);\n    \n    render.hideLoader();\n\n    if (data.totalHits) {\n        \n        render.createGallery(data.hits);\n\n        setTimeout(() => {\n            const galleryItem = document.querySelector(\".gallery-item\");\n            const rowHeight = galleryItem.getBoundingClientRect().height;          \n\n            window.scrollBy({\n                top: 2 * rowHeight,\n                behavior: \"smooth\",\n            });\n        }, 500);\n\n        if (Math.ceil(data.totalHits / 15) >= page) {\n            render.showLoadMoreButton();            \n        } else {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n        \n    } else {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: \"topRight\",\n        });\n    };\n}\n\nform.addEventListener('submit', galleryUpd);\nloadmorebtn.addEventListener('click', galleryUpd)\n"],"names":["getImagesByQuery","q","page","params","axios","gallery","loader","loadmorebtn","lightbox","SimpleLightbox","createGallery","images","galleryStr","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","keyWord","galleryUpd","evt","render.hideLoadMoreButton","render.clearGallery","render.showLoader","data","render.hideLoader","render.createGallery","rowHeight","render.showLoadMoreButton","iziToast"],"mappings":"owBAEe,eAAeA,EAAiBC,EAAGC,EAAM,CACtD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,CAAG,EAED,GAAI,CAEF,OADiB,MAAME,EAAM,IAAI,4BAA4BD,CAAM,EAAE,GACrD,IACjB,MAAe,CACd,MAAO,EACR,CACH,CChBA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,SAAU,GACV,aAAc,MACd,aAAc,IACd,eAAgB,CACpB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAaD,EACd,IAAIE,GACM;AAAA,wDACqCA,EAAM,aAAa;AAAA;AAAA;AAAA,mCAGxCA,EAAM,YAAY;AAAA,mCAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,wEAK2BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wEAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wEAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,wEAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,0BAI5D,EAClB,KAAK,EAAE,EAEZR,EAAQ,mBAAmB,YAAaO,CAAU,EAClDJ,EAAS,QAAO,CACpB,CAEO,SAASM,GAAe,CAC3BT,EAAQ,UAAY,EACxB,CAEO,SAASU,GAAa,CACzBT,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASU,GAAa,CACzBV,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASW,GAAqB,CACjCV,EAAY,UAAU,IAAI,WAAW,CACzC,CAEO,SAASW,GAAqB,CACjCX,EAAY,UAAU,OAAO,WAAW,CAC5C,CC7DA,MAAMY,EAAO,SAAS,cAAc,OAAO,EACrCZ,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIa,EACAlB,EAEJ,MAAMmB,EAAa,MAAMC,GAAO,CAI5B,GAHAA,EAAI,eAAc,EAClBC,IAEID,EAAI,OAAO,WAAa,SACxBE,IACAJ,EAAUE,EAAI,OAAO,SAAS,aAAa,EAAE,MAAM,OACnDpB,EAAO,EACPiB,EAAK,MAAK,EACN,CAAEC,GAAU,OAGpBK,IAEA,MAAMC,EAAO,MAAM1B,EAAiBoB,EAASlB,GAAM,EAEnDyB,IAEID,EAAK,WAELE,EAAqBF,EAAK,IAAI,EAE9B,WAAW,IAAM,CAEb,MAAMG,EADc,SAAS,cAAc,eAAe,EAC5B,sBAAqB,EAAG,OAEtD,OAAO,SAAS,CACZ,IAAK,EAAIA,EACT,SAAU,QAC1B,CAAa,CACJ,EAAE,GAAG,EAEF,KAAK,KAAKH,EAAK,UAAY,EAAE,GAAKxB,EAClC4B,IAEAC,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UAC1B,CAAa,GAILA,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UACtB,CAAS,CAET,EAEAZ,EAAK,iBAAiB,SAAUE,CAAU,EAC1Cd,EAAY,iBAAiB,QAASc,CAAU"}